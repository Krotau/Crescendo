(()=>{"use strict";var e={935:function(e,n,s){var r=s(893),t=s(294),o=s(745),a=s(259),i=s(767),l=s(220);let c=(0,l.cn)({question:"",ready:!1,answer:"",reasoning:""}),d=(0,l.cn)(""),u=(0,l.cn)(!1),h=(0,l.cn)([]),x=(0,l.cn)(0),j=(0,l.cn)(!1),g=i.z.object({msg:i.z.string(),done:i.z.boolean(),context_size:i.z.number()});i.z.object({tool_name:i.z.string(),tool_arguments:i.z.object()});let m=i.z.object({kind:i.z.literal(["tool_init","tool_result","message"]),payload:i.z.object()}),v=()=>{let[e,n]=(0,a.KO)(d),[s,o]=(0,a.KO)(u),[i,l]=(0,t.useState)(0),[v,p]=(0,t.useState)(!1),[b,f]=(0,t.useState)(!1),[y,_]=(0,a.KO)(h),[k,N]=(0,a.KO)(c),[O,w]=(0,a.KO)(j),C=(0,a.b9)(x),S=window.location,z=(0,t.useMemo)(()=>new WebSocket(`ws://${S.hostname}:${S.port}/ws`),[]),F=()=>{p(!0),console.log("Sending message to api"),i>0&&_([...y,k]),z.send(e),N({question:e,ready:!1,answer:"",reasoning:""}),n(""),l(i+1)},K=e=>{let n,s=e.done;if("<think>"==e.msg){console.log("thinking..."),f(!0);return}if("</think>"==e.msg){console.log("done thinking!"),f(!1);return}if(b){let n=k.reasoning.concat(e.msg);N({...k,reasoning:n,ready:s})}else{let n=k.answer.concat(e.msg);N({...k,answer:n,ready:s})}s&&p(!1)};return z.onopen=()=>{o(!0)},z.onmessage=e=>{let n=JSON.parse(e.data);if("message"===m.parse(n).kind){let e=g.parse(n.payload);C(e.context_size),K(e)}else console.log(n)},(0,r.jsxs)(r.Fragment,{children:[s?":)":":(",(0,r.jsx)("p",{children:"Ask something..."}),(0,r.jsx)("input",{type:"text",id:"messageText",autoComplete:"off",value:e,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&F()}}),(0,r.jsxs)("div",{className:"chat_buttons",children:[(0,r.jsx)("button",{onClick:()=>F(),children:"Send"}),(0,r.jsx)("button",{children:"Clear Context"}),(0,r.jsx)("button",{onClick:()=>{w(!O)},children:"File Menu"}),v?(0,r.jsx)("span",{className:"loader"}):""]})]})},p=()=>{let e=(0,a.Dv)(h),n=(0,a.Dv)(c),s=[...e].reverse();return(0,r.jsxs)("div",{className:"chat_log",children:[(0,r.jsx)("div",{className:"chat_container",children:(0,r.jsx)("div",{className:"question",children:n.question})}),(0,r.jsx)("div",{className:"answer",children:n.answer}),(0,r.jsx)("div",{className:"reasoning",children:n.reasoning}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{children:"Play"})}),(0,r.jsx)("p",{children:"Chat Log"}),s.map(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"chat_container margin_top",children:(0,r.jsx)("div",{className:"question",children:e.question})}),(0,r.jsx)("div",{className:"answer",children:e.answer}),(0,r.jsx)("div",{className:"reasoning",children:e.reasoning}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{children:"Play"}),(0,r.jsx)("button",{children:"Expand"})]})]}))]})},b=()=>{let e=Math.round(100*(0,a.Dv)(x)/4e4);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"serverinfo_context_container",children:[(0,r.jsxs)("p",{children:["Context Used: ",e,"%"]}),(0,r.jsx)("div",{className:"context_container",children:(0,r.jsx)("div",{style:{width:`${e.toFixed(2)}%`},className:"context_bar",children:(0,r.jsx)("p",{})})})]})})},f=document.getElementById("root");f&&o.createRoot(f).render((0,r.jsx)(t.StrictMode,{children:(0,r.jsx)(()=>{let[e,n]=(0,a.KO)(j),s=`overlay_background ${e?"open_bg":"closed"}`,o=`overlay ${e?"open_menu":"closed"}`,i=(0,t.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:i,className:s,onClick:s=>{s.target===i.current&&n(!e)},children:(0,r.jsx)("div",{className:o,children:(0,r.jsxs)("div",{className:e?"show":"hide",children:[(0,r.jsx)("button",{onClick:()=>{n(!e)},children:"Close"}),(0,r.jsx)("button",{children:"File 1"}),(0,r.jsx)("button",{children:"File 2"}),(0,r.jsx)("button",{children:"File 3"}),(0,r.jsx)("button",{children:"File 4"})]})})}),(0,r.jsxs)("div",{className:"chat_bg",children:[(0,r.jsx)(v,{}),(0,r.jsx)(p,{})]}),(0,r.jsx)("div",{className:"server_info_bg",children:(0,r.jsx)(b,{})})]})},{})}))}},n={};function s(r){var t=n[r];if(void 0!==t)return t.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,s.d=(e,n)=>{for(var r in n)s.o(n,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];s.O=(n,r,t,o)=>{if(r){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[r,t,o];return}for(var i=1/0,a=0;a<e.length;a++){for(var[r,t,o]=e[a],l=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(s.O).every(e=>s.O[e](r[c]))?r.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(a--,1);var d=t();void 0!==d&&(n=d)}}return n}})(),s.rv=()=>"1.3.11",(()=>{var e={980:0};s.O.j=n=>0===e[n];var n=(n,r)=>{var t,o,[a,i,l]=r,c=0;if(a.some(n=>0!==e[n])){for(t in i)s.o(i,t)&&(s.m[t]=i[t]);if(l)var d=l(s)}for(n&&n(r);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),s.ruid="bundler=rspack@1.3.11";var r=s.O(void 0,["361","53"],function(){return s(935)});r=s.O(r)})();