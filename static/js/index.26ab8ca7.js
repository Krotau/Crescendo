(()=>{"use strict";var e={935:function(e,n,s){var r=s(893),t=s(294),a=s(745),o=s(259),i=s(767),l=s(220);let c=(0,l.cn)({question:"",ready:!1,answer:"",reasoning:""}),d=(0,l.cn)(""),h=(0,l.cn)(!1),u=(0,l.cn)([]),x=(0,l.cn)(0),j=(0,l.cn)(!1),g=i.z.object({msg:i.z.string(),done:i.z.boolean(),context_size:i.z.number()}),v=()=>{let[e,n]=(0,o.KO)(d),[s,a]=(0,o.KO)(h),[i,l]=(0,t.useState)(0),[v,m]=(0,t.useState)(!1),[p,b]=(0,o.KO)(u),[f,y]=(0,o.KO)(c),[O,_]=(0,o.KO)(j),w=(0,o.b9)(x),N=(0,t.useMemo)(()=>new WebSocket("ws://localhost:8000/ws"),[]),k=()=>{console.log("Sending message to api"),i>0&&b([...p,f]),N.send(e),y({question:e,ready:!1,answer:"",reasoning:""}),n(""),l(i+1)},C=e=>{let n,s=e.done;if("<think>"==e.msg){console.log("thinking..."),m(!0);return}if("</think>"==e.msg){console.log("done thinking!"),m(!1);return}if(v){let n=f.reasoning.concat(e.msg);y({...f,reasoning:n,ready:s})}else{let n=f.answer.concat(e.msg);y({...f,answer:n,ready:s})}};return N.onopen=()=>{a(!0)},N.onmessage=e=>{console.log(`Parsing raw data: ${e.data}`);let n=JSON.parse(e.data);console.log("Parsing data with zod schema");let s=g.parse(n);console.log("parsed data: "+s.msg+" "+s.done),w(s.context_size),C(s)},(0,r.jsxs)(r.Fragment,{children:[s?":)":":(",(0,r.jsx)("p",{children:"Ask something..."}),(0,r.jsx)("input",{type:"text",id:"messageText",autoComplete:"off",value:e,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&k()}}),(0,r.jsxs)("div",{className:"chat_buttons",children:[(0,r.jsx)("button",{onClick:()=>k(),children:"Send"}),(0,r.jsx)("button",{children:"Clear Context"}),(0,r.jsx)("button",{onClick:()=>{_(!O)},children:"File Menu"})]})]})},m=()=>{let e=(0,o.Dv)(u),n=(0,o.Dv)(c);return(0,r.jsx)("div",{className:"chat_log",children:(0,r.jsxs)("div",{className:"chat_item",children:[(0,r.jsx)("div",{className:"chat_container",children:(0,r.jsx)("div",{className:"question",children:n.question})}),(0,r.jsx)("div",{className:"answer",children:n.answer}),(0,r.jsx)("div",{className:"reasoning",children:n.reasoning}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{children:"Play"}),(0,r.jsx)("button",{children:"Expand"})]}),(0,r.jsx)("p",{children:"Chat Log"}),e.map(e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"chat_container margin_top",children:(0,r.jsx)("div",{className:"question",children:e.question})}),(0,r.jsx)("div",{className:"answer",children:e.answer}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{children:"Play"}),(0,r.jsx)("button",{children:"Expand"})]})]}))]})})},p=()=>{let e=Math.round(100*(0,o.Dv)(x)/4e4);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"serverinfo_context_container",children:[(0,r.jsxs)("p",{children:["Context Used: ",e,"%"]}),(0,r.jsx)("div",{className:"context_container",children:(0,r.jsx)("div",{style:{width:`${e.toFixed(2)}%`},className:"context_bar",children:(0,r.jsx)("p",{})})})]})})},b=document.getElementById("root");b&&a.createRoot(b).render((0,r.jsx)(t.StrictMode,{children:(0,r.jsx)(()=>{let[e,n]=(0,o.KO)(j),s=`overlay_background ${e?"open_bg":"closed"}`,a=`overlay ${e?"open_menu":"closed"}`,i=(0,t.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:i,className:s,onClick:s=>{s.target===i.current&&n(!e)},children:(0,r.jsx)("div",{className:a,children:(0,r.jsxs)("div",{className:e?"show":"hide",children:[(0,r.jsx)("button",{onClick:()=>{n(!e)},children:"Close"}),(0,r.jsx)("button",{children:"File 1"}),(0,r.jsx)("button",{children:"File 2"}),(0,r.jsx)("button",{children:"File 3"}),(0,r.jsx)("button",{children:"File 4"})]})})}),(0,r.jsxs)("div",{className:"chat_bg",children:[(0,r.jsx)(v,{}),(0,r.jsx)(m,{})]}),(0,r.jsx)("div",{className:"server_info_bg",children:(0,r.jsx)(p,{})})]})},{})}))}},n={};function s(r){var t=n[r];if(void 0!==t)return t.exports;var a=n[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.m=e,s.d=(e,n)=>{for(var r in n)s.o(n,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];s.O=(n,r,t,a)=>{if(r){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[r,t,a];return}for(var i=1/0,o=0;o<e.length;o++){for(var[r,t,a]=e[o],l=!0,c=0;c<r.length;c++)(!1&a||i>=a)&&Object.keys(s.O).every(e=>s.O[e](r[c]))?r.splice(c--,1):(l=!1,a<i&&(i=a));if(l){e.splice(o--,1);var d=t();void 0!==d&&(n=d)}}return n}})(),s.rv=()=>"1.3.11",(()=>{var e={980:0};s.O.j=n=>0===e[n];var n=(n,r)=>{var t,a,[o,i,l]=r,c=0;if(o.some(n=>0!==e[n])){for(t in i)s.o(i,t)&&(s.m[t]=i[t]);if(l)var d=l(s)}for(n&&n(r);c<o.length;c++)a=o[c],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),s.ruid="bundler=rspack@1.3.11";var r=s.O(void 0,["361","53"],function(){return s(935)});r=s.O(r)})();